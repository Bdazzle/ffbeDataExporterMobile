{"ast":null,"code":"var _Asset = require(\"./Asset\");\n\nvar _PlatformUtils = require(\"./PlatformUtils\");\n\nvar _resolveAssetSource = require(\"./resolveAssetSource\");\n\nif (_PlatformUtils.IS_ENV_WITH_UPDATES_ENABLED) {\n  (0, _resolveAssetSource.setCustomSourceTransformer)(function (resolver) {\n    try {\n      if (resolver.asset.fileHashes) {\n        var asset = _Asset.Asset.fromMetadata(resolver.asset);\n\n        return resolver.fromSource(asset.downloaded ? asset.localUri : asset.uri);\n      } else {\n        return resolver.defaultAsset();\n      }\n    } catch (e) {\n      return resolver.defaultAsset();\n    }\n  });\n}","map":{"version":3,"sources":["../src/Asset.fx.ts"],"names":[],"mappings":"AAAA;;AACA;;AACA;;AAGA,IAAI,0CAAJ,EAAiC;AAC/B,sDAA2B,UAAA,QAAQ,EAAG;AACpC,QAAI;AAEF,UAAI,QAAQ,CAAC,KAAT,CAAe,UAAnB,EAA+B;AAC7B,YAAM,KAAK,GAAG,aAAM,YAAN,CAAmB,QAAQ,CAAC,KAA5B,CAAd;;AACA,eAAO,QAAQ,CAAC,UAAT,CAAoB,KAAK,CAAC,UAAN,GAAmB,KAAK,CAAC,QAAzB,GAAqC,KAAK,CAAC,GAA/D,CAAP;AACD,OAHD,MAGO;AACL,eAAO,QAAQ,CAAC,YAAT,EAAP;AACD;AACF,KARD,CAQE,OAAO,CAAP,EAAU;AACV,aAAO,QAAQ,CAAC,YAAT,EAAP;AACD;AACF,GAZD;AAaD","sourcesContent":["import { Asset } from './Asset';\nimport { IS_ENV_WITH_UPDATES_ENABLED } from './PlatformUtils';\nimport { setCustomSourceTransformer } from './resolveAssetSource';\n\n// Override React Native's asset resolution for `Image` components in contexts where it matters\nif (IS_ENV_WITH_UPDATES_ENABLED) {\n  setCustomSourceTransformer(resolver => {\n    try {\n      // Bundler is using the hashAssetFiles plugin if and only if the fileHashes property exists\n      if (resolver.asset.fileHashes) {\n        const asset = Asset.fromMetadata(resolver.asset);\n        return resolver.fromSource(asset.downloaded ? asset.localUri! : asset.uri);\n      } else {\n        return resolver.defaultAsset();\n      }\n    } catch (e) {\n      return resolver.defaultAsset();\n    }\n  });\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}